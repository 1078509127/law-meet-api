{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-5d7a052e\"],{\"02a5\":function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return i}));a(\"b775\");var i=\"/admin-api/storage/create\"},\"07dd\":function(t,e,a){},\"333d\":function(t,e,a){\"use strict\";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"pagination-container\",class:{hidden:t.hidden}},[a(\"el-pagination\",t._b({attrs:{background:t.background,\"current-page\":t.currentPage,\"page-size\":t.pageSize,layout:t.layout,total:t.total},on:{\"update:currentPage\":function(e){t.currentPage=e},\"update:current-page\":function(e){t.currentPage=e},\"update:pageSize\":function(e){t.pageSize=e},\"update:page-size\":function(e){t.pageSize=e},\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}},\"el-pagination\",t.$attrs,!1))],1)},n=[];a(\"a9e3\");Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,a){var i=l(),n=t-i,s=20,d=0;e=\"undefined\"===typeof e?500:e;var c=function t(){d+=s;var l=Math.easeInOutQuad(d,i,n,e);o(l),d<e?r(t):a&&\"function\"===typeof a&&a()};c()}var d={name:\"Pagination\",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:\"total, sizes, prev, pager, next, jumper\"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit(\"update:page\",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit(\"update:limit\",t)}}},methods:{handleSizeChange:function(t){this.$emit(\"pagination\",{page:this.currentPage,limit:t}),this.autoScroll&&s(0,800)},handleCurrentChange:function(t){this.$emit(\"pagination\",{page:t,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},c=d,u=(a(\"79e5\"),a(\"2877\")),m=Object(u[\"a\"])(c,i,n,!1,null,\"7d9f0a7c\",null);e[\"a\"]=m.exports},\"40a3\":function(t,e,a){\"use strict\";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"filter-container\"},[a(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{clearable:\"\",size:\"mini\",placeholder:\"请输入品牌商ID\"},model:{value:t.listQuery.id,callback:function(e){t.$set(t.listQuery,\"id\",e)},expression:\"listQuery.id\"}}),a(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{clearable:\"\",size:\"mini\",placeholder:\"请输入品牌商名称\"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,\"name\",e)},expression:\"listQuery.name\"}}),a(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"GET /admin/brand/list\"],expression:\"['GET /admin/brand/list']\"}],staticClass:\"filter-item\",attrs:{size:\"mini\",type:\"primary\",icon:\"el-icon-search\"},on:{click:t.handleFilter}},[t._v(\"查找\")]),a(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"POST /admin/brand/create\"],expression:\"['POST /admin/brand/create']\"}],staticClass:\"filter-item\",attrs:{size:\"mini\",type:\"primary\",icon:\"el-icon-edit\"},on:{click:t.handleCreate}},[t._v(\"添加\")]),a(\"el-button\",{staticClass:\"filter-item\",attrs:{loading:t.downloadLoading,size:\"mini\",type:\"warning\",icon:\"el-icon-download\"},on:{click:t.handleDownload}},[t._v(\"导出\")])],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.listLoading,expression:\"listLoading\"}],attrs:{data:t.list,size:\"small\",\"element-loading-text\":\"正在查询中。。。\",border:\"\",fit:\"\",\"highlight-current-row\":\"\"}},[t._v(\" <\"),a(\"el-table-column\",{attrs:{align:\"center\",width:\"100px\",label:\"用户ID\",prop:\"id\",sortable:\"\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"用户名\",prop:\"nickname\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"手机号码\",prop:\"mobile\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"性别\",prop:\"gender\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[t._v(\" \"+t._s(t.genderDic[e.row.gender])+\" \")]}}])}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"预约地址\",prop:\"birthday\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"预约时间\",prop:\"userLevel\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[t._v(\" \"+t._s(t.levelDic[e.row.userLevel])+\" \")]}}])}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"审批状态\",prop:\"birthday\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"审批备注\",prop:\"birthday\"}}),a(\"el-table-column\",{attrs:{align:\"center\",label:\"操作\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-button\",{attrs:{type:\"primary\",size:\"mini\"},on:{click:function(a){return t.shareUrlDetail(e.row)}}},[t._v(\"推广码\")]),a(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"POST /admin/brand/update\"],expression:\"['POST /admin/brand/update']\"}],attrs:{type:\"primary\",size:\"mini\"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v(\"编辑\")]),a(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"POST /admin/brand/delete\"],expression:\"['POST /admin/brand/delete']\"}],attrs:{type:\"danger\",size:\"mini\"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v(\"删除\")])]}}])})],1),a(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.total>0,expression:\"total>0\"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{\"update:page\":function(e){return t.$set(t.listQuery,\"page\",e)},\"update:limit\":function(e){return t.$set(t.listQuery,\"limit\",e)},pagination:t.getList}}),a(\"el-dialog\",{attrs:{title:t.textMap[t.dialogStatus],visible:t.shareUrlDialogVisible,width:\"700\"},on:{\"update:visible\":function(e){t.shareUrlDialogVisible=e}}},[a(\"el-form\",{attrs:{data:t.dataForm,\"label-position\":\"left\"}},[a(\"el-form-item\",{attrs:{label:\"推广二维码\"}},[a(\"img\",{attrs:{src:t.dataForm.shareUrl,width:\"300\"}})])],1)],1),a(\"el-dialog\",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{\"update:visible\":function(e){t.dialogFormVisible=e}}},[a(\"el-form\",{ref:\"dataForm\",staticStyle:{width:\"400px\",\"margin-left\":\"50px\"},attrs:{rules:t.rules,model:t.dataForm,\"status-icon\":\"\",\"label-position\":\"left\",\"label-width\":\"100px\"}},[a(\"el-form-item\",{attrs:{label:\"品牌商名称\",prop:\"name\"}},[a(\"el-input\",{model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,\"name\",e)},expression:\"dataForm.name\"}})],1),a(\"el-form-item\",{attrs:{label:\"主营类目\"}},[a(\"el-cascader\",{attrs:{options:t.categoryList,\"expand-trigger\":\"hover\"},on:{change:t.handleCategoryChange},model:{value:t.dataForm.categoryIds,callback:function(e){t.$set(t.dataForm,\"categoryIds\",e)},expression:\"dataForm.categoryIds\"}})],1),a(\"el-form-item\",{attrs:{label:\"管理员\"}},[a(\"el-select\",{model:{value:t.dataForm.adminId,callback:function(e){t.$set(t.dataForm,\"adminId\",e)},expression:\"dataForm.adminId\"}},t._l(t.adminList,(function(t){return a(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"介绍\",prop:\"simpleDesc\"}},[a(\"el-input\",{model:{value:t.dataForm.desc,callback:function(e){t.$set(t.dataForm,\"desc\",e)},expression:\"dataForm.desc\"}})],1),a(\"el-form-item\",{attrs:{label:\"品牌商图片\",prop:\"picUrl\"}},[a(\"el-upload\",{staticClass:\"avatar-uploader\",attrs:{headers:t.headers,action:t.uploadPath,\"show-file-list\":!1,\"on-success\":t.uploadPicUrl,accept:\".jpg,.jpeg,.png,.gif\"}},[t.dataForm.picUrl?a(\"img\",{staticClass:\"avatar\",attrs:{src:t.dataForm.picUrl}}):a(\"i\",{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),a(\"el-form-item\",{attrs:{label:\"底价\",prop:\"floorPrice\"}},[a(\"el-input\",{model:{value:t.dataForm.floorPrice,callback:function(e){t.$set(t.dataForm,\"floorPrice\",e)},expression:\"dataForm.floorPrice\"}})],1)],1),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(\"取消\")]),\"create\"==t.dialogStatus?a(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.createData}},[t._v(\"确定\")]):a(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.updateData}},[t._v(\"确定\")])],1)],1)],1)},n=[],r=a(\"b85c\"),o=(a(\"a434\"),a(\"d3b7\"),a(\"3ca3\"),a(\"ddb0\"),a(\"b775\"));function l(t){return Object(o[\"a\"])({url:\"/brand/list\",method:\"get\",params:t})}function s(t){return Object(o[\"a\"])({url:\"/brand/create\",method:\"post\",data:t})}function d(t){return Object(o[\"a\"])({url:\"/brand/update\",method:\"post\",data:t})}function c(t){return Object(o[\"a\"])({url:\"/brand/delete\",method:\"post\",data:t})}function u(){return Object(o[\"a\"])({url:\"/brand/catAndAdmin\",method:\"get\"})}var m=a(\"02a5\"),p=a(\"5f87\"),f=a(\"333d\"),g={name:\"Brand\",components:{Pagination:f[\"a\"]},data:function(){return{uploadPath:m[\"a\"],list:void 0,total:0,categoryList:[],adminList:[],listLoading:!0,listQuery:{page:1,limit:20,id:void 0,name:void 0,sort:\"add_time\",order:\"desc\"},dataForm:{id:void 0,name:\"\",desc:\"\",floorPrice:void 0,picUrl:void 0,categoryIds:[],defaultCategoryId:void 0,adminId:void 0},dialogFormVisible:!1,shareUrlDialogVisible:!1,dialogStatus:\"\",textMap:{update:\"编辑\",create:\"创建\",shareUrl:\"店铺推广码\"},rules:{name:[{required:!0,message:\"品牌商名称不能为空\",trigger:\"blur\"}]},downloadLoading:!1}},computed:{headers:function(){return{\"X-Dts-Admin-Token\":Object(p[\"a\"])()}}},created:function(){this.getList(),this.init()},methods:{init:function(){var t=this;u().then((function(e){t.categoryList=e.data.data.categoryList,t.adminList=e.data.data.adminList}))},getList:function(){var t=this;this.listLoading=!0,l(this.listQuery).then((function(e){t.list=e.data.data.items,t.total=e.data.data.total,t.listLoading=!1})).catch((function(){t.list=[],t.total=0,t.listLoading=!1}))},handleFilter:function(){this.listQuery.page=1,this.getList()},resetForm:function(){this.dataForm={id:void 0,name:\"\",desc:\"\",floorPrice:void 0,picUrl:void 0,categoryIds:[],defaultCategoryId:void 0,adminId:void 0}},handleCreate:function(){var t=this;this.resetForm(),this.dialogStatus=\"create\",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs[\"dataForm\"].clearValidate()}))},uploadPicUrl:function(t){this.dataForm.picUrl=t.data.url},createData:function(){var t=this;this.$refs[\"dataForm\"].validate((function(e){e&&s(t.dataForm).then((function(e){t.list.unshift(e.data.data),t.dialogFormVisible=!1,t.$notify.success({title:\"成功\",message:\"创建成功\"})})).catch((function(e){t.$notify.error({title:\"失败\",message:e.data.errmsg})}))}))},handleUpdate:function(t){var e=this;this.dataForm=Object.assign({},t),this.dialogStatus=\"update\",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs[\"dataForm\"].clearValidate()}))},updateData:function(){var t=this;this.$refs[\"dataForm\"].validate((function(e){e&&d(t.dataForm).then((function(){var e,a=Object(r[\"a\"])(t.list);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(i.id===t.dataForm.id){var n=t.list.indexOf(i);t.list.splice(n,1,t.dataForm);break}}}catch(o){a.e(o)}finally{a.f()}t.dialogFormVisible=!1,t.$notify.success({title:\"成功\",message:\"更新成功\"})})).catch((function(e){t.$notify.error({title:\"失败\",message:e.data.errmsg})}))}))},handleDelete:function(t){var e=this;c(t).then((function(a){e.$notify.success({title:\"成功\",message:\"删除成功\"});var i=e.list.indexOf(t);e.list.splice(i,1)})).catch((function(t){e.$notify.error({title:\"失败\",message:t.data.errmsg})}))},handleCategoryChange:function(t){this.dataForm.defaultCategoryId=t[t.length-1]},shareUrlDetail:function(t){var e=this;this.dataForm=Object.assign({},t),this.dialogStatus=\"shareUrl\",this.shareUrlDialogVisible=!0,this.$nextTick((function(){e.$refs[\"dataForm\"].clearValidate()}))},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e(\"chunk-26f35829\"),a.e(\"chunk-2d0cc0b6\")]).then(a.bind(null,\"4bf8\")).then((function(e){var a=[\"品牌商ID\",\"品牌商名称\",\"介绍\",\"低价\",\"品牌商图片\"],i=[\"id\",\"name\",\"desc\",\"floorPrice\",\"picUrl\"];e.export_json_to_excel2(a,t.list,i,\"品牌商信息\"),t.downloadLoading=!1}))}}},h=g,b=(a(\"b58f\"),a(\"2877\")),v=Object(b[\"a\"])(h,i,n,!1,null,null,null);e[\"default\"]=v.exports},7372:function(t,e,a){},\"79e5\":function(t,e,a){\"use strict\";a(\"07dd\")},b58f:function(t,e,a){\"use strict\";a(\"7372\")}}]);","extractedComments":[]}