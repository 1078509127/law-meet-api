{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-7a086192\"],{\"07dd\":function(e,t,i){},\"333d\":function(e,t,i){\"use strict\";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"pagination-container\",class:{hidden:e.hidden}},[i(\"el-pagination\",e._b({attrs:{background:e.background,\"current-page\":e.currentPage,\"page-size\":e.pageSize,layout:e.layout,total:e.total},on:{\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t},\"update:pageSize\":function(t){e.pageSize=t},\"update:page-size\":function(t){e.pageSize=t},\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}},\"el-pagination\",e.$attrs,!1))],1)},n=[];i(\"a9e3\");Math.easeInOutQuad=function(e,t,i,a){return e/=a/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,i){var a=r(),n=e-a,l=20,c=0;t=\"undefined\"===typeof t?500:t;var d=function e(){c+=l;var r=Math.easeInOutQuad(c,a,n,t);o(r),c<t?s(e):i&&\"function\"===typeof i&&i()};d()}var c={name:\"Pagination\",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:\"total, sizes, prev, pager, next, jumper\"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit(\"update:page\",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit(\"update:limit\",e)}}},methods:{handleSizeChange:function(e){this.$emit(\"pagination\",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit(\"pagination\",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},d=c,u=(i(\"79e5\"),i(\"2877\")),m=Object(u[\"a\"])(d,a,n,!1,null,\"7d9f0a7c\",null);t[\"a\"]=m.exports},\"79e5\":function(e,t,i){\"use strict\";i(\"07dd\")},\"97d6\":function(e,t,i){\"use strict\";i.d(t,\"d\",(function(){return n})),i.d(t,\"a\",(function(){return s})),i.d(t,\"g\",(function(){return o})),i.d(t,\"b\",(function(){return r})),i.d(t,\"c\",(function(){return l})),i.d(t,\"f\",(function(){return c})),i.d(t,\"e\",(function(){return d}));var a=i(\"b775\");function n(e){return Object(a[\"a\"])({url:\"/role/list\",method:\"get\",params:e})}function s(e){return Object(a[\"a\"])({url:\"/role/create\",method:\"post\",data:e})}function o(e){return Object(a[\"a\"])({url:\"/role/update\",method:\"post\",data:e})}function r(e){return Object(a[\"a\"])({url:\"/role/delete\",method:\"post\",data:e})}function l(e){return Object(a[\"a\"])({url:\"/role/permissions\",method:\"get\",params:e})}function c(e){return Object(a[\"a\"])({url:\"/role/permissions\",method:\"post\",data:e})}function d(e){return Object(a[\"a\"])({url:\"/role/options\",method:\"get\",params:e})}},f7ae:function(e,t,i){\"use strict\";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"app-container\"},[i(\"div\",{staticClass:\"filter-container\"},[i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{clearable:\"\",size:\"mini\",placeholder:\"请输入角色名称\"},model:{value:e.listQuery.rolename,callback:function(t){e.$set(e.listQuery,\"rolename\",t)},expression:\"listQuery.rolename\"}}),i(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"GET /admin/role/list\"],expression:\"['GET /admin/role/list']\"}],staticClass:\"filter-item\",attrs:{size:\"mini\",type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleFilter}},[e._v(\"查找\")]),i(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"POST /admin/role/create\"],expression:\"['POST /admin/role/create']\"}],staticClass:\"filter-item\",attrs:{size:\"mini\",type:\"primary\",icon:\"el-icon-edit\"},on:{click:e.handleCreate}},[e._v(\"添加\")])],1),i(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],attrs:{data:e.list,size:\"small\",\"element-loading-text\":\"正在查询中。。。\",border:\"\",fit:\"\",\"highlight-current-row\":\"\"}},[i(\"el-table-column\",{attrs:{align:\"center\",label:\"角色名称\",prop:\"name\",sortable:\"\"}}),i(\"el-table-column\",{attrs:{align:\"center\",label:\"说明\",prop:\"desc\"}}),i(\"el-table-column\",{attrs:{align:\"center\",label:\"操作\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"POST /admin/role/update\"],expression:\"['POST /admin/role/update']\"}],attrs:{type:\"primary\",size:\"mini\"},on:{click:function(i){return e.handleUpdate(t.row)}}},[e._v(\"编辑\")]),i(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"POST /admin/role/delete\"],expression:\"['POST /admin/role/delete']\"}],attrs:{type:\"danger\",size:\"mini\"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v(\"删除\")]),i(\"el-button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"GET /admin/role/permissions\"],expression:\"['GET /admin/role/permissions']\"}],attrs:{type:\"primary\",size:\"mini\"},on:{click:function(i){return e.handlePermission(t.row)}}},[e._v(\"授权\")])]}}])})],1),i(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.total>0,expression:\"total>0\"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{\"update:page\":function(t){return e.$set(e.listQuery,\"page\",t)},\"update:limit\":function(t){return e.$set(e.listQuery,\"limit\",t)},pagination:e.getList}}),i(\"el-dialog\",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{\"update:visible\":function(t){e.dialogFormVisible=t}}},[i(\"el-form\",{ref:\"dataForm\",staticStyle:{width:\"400px\",\"margin-left\":\"50px\"},attrs:{rules:e.rules,model:e.dataForm,\"status-icon\":\"\",\"label-position\":\"left\",\"label-width\":\"100px\"}},[i(\"el-form-item\",{attrs:{label:\"角色名称\",prop:\"name\"}},[i(\"el-input\",{model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,\"name\",t)},expression:\"dataForm.name\"}})],1),i(\"el-form-item\",{attrs:{label:\"说明\",prop:\"desc\"}},[i(\"el-input\",{model:{value:e.dataForm.desc,callback:function(t){e.$set(e.dataForm,\"desc\",t)},expression:\"dataForm.desc\"}})],1)],1),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(\"取消\")]),\"create\"==e.dialogStatus?i(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.createData}},[e._v(\"确定\")]):i(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.updateData}},[e._v(\"确定\")])],1)],1),i(\"el-dialog\",{attrs:{visible:e.permissionDialogFormVisible,title:\"权限配置\"},on:{\"update:visible\":function(t){e.permissionDialogFormVisible=t}}},[i(\"el-tree\",{ref:\"tree\",attrs:{data:e.systemPermissions,\"default-checked-keys\":e.assignedPermissions,\"show-checkbox\":\"\",\"node-key\":\"id\",\"highlight-current\":\"\"},scopedSlots:e._u([{key:\"default\",fn:function(t){t.node;var a=t.data;return i(\"span\",{staticClass:\"custom-tree-node\"},[i(\"span\",[e._v(e._s(a.label))]),a.api?i(\"el-tag\",{attrs:{type:\"success\",size:\"mini\"}},[e._v(e._s(a.api))]):e._e()],1)}}])}),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{on:{click:function(t){e.permissionDialogFormVisible=!1}}},[e._v(\"取消\")]),i(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.updatePermission}},[e._v(\"确定\")])],1)],1)],1)},n=[],s=i(\"b85c\"),o=(i(\"a434\"),i(\"97d6\")),r=i(\"333d\"),l={name:\"Role\",components:{Pagination:r[\"a\"]},data:function(){return{list:null,total:0,listLoading:!0,listQuery:{page:1,limit:20,name:void 0,sort:\"add_time\",order:\"desc\"},dataForm:{id:void 0,name:void 0,desc:void 0},dialogFormVisible:!1,dialogStatus:\"\",textMap:{update:\"编辑\",create:\"创建\"},rules:{name:[{required:!0,message:\"角色名称不能为空\",trigger:\"blur\"}]},permissionDialogFormVisible:!1,systemPermissions:null,assignedPermissions:null,permissionForm:{roleId:void 0,permissions:[]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(o[\"d\"])(this.listQuery).then((function(t){e.list=t.data.data.items,e.total=t.data.data.total,e.listLoading=!1})).catch((function(){e.list=[],e.total=0,e.listLoading=!1}))},handleFilter:function(){this.listQuery.page=1,this.getList()},resetForm:function(){this.dataForm={id:void 0,name:void 0,desc:void 0}},handleCreate:function(){var e=this;this.resetForm(),this.dialogStatus=\"create\",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs[\"dataForm\"].clearValidate()}))},createData:function(){var e=this;this.$refs[\"dataForm\"].validate((function(t){t&&Object(o[\"a\"])(e.dataForm).then((function(t){e.list.unshift(t.data.data),e.dialogFormVisible=!1,e.$notify.success({title:\"成功\",message:\"添加角色成功\"})})).catch((function(t){e.$notify.error({title:\"失败\",message:t.data.errmsg})}))}))},handleUpdate:function(e){var t=this;this.dataForm=Object.assign({},e),this.dialogStatus=\"update\",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs[\"dataForm\"].clearValidate()}))},updateData:function(){var e=this;this.$refs[\"dataForm\"].validate((function(t){t&&Object(o[\"g\"])(e.dataForm).then((function(){var t,i=Object(s[\"a\"])(e.list);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.id===e.dataForm.id){var n=e.list.indexOf(a);e.list.splice(n,1,e.dataForm);break}}}catch(o){i.e(o)}finally{i.f()}e.dialogFormVisible=!1,e.$notify.success({title:\"成功\",message:\"更新管理员成功\"})})).catch((function(t){e.$notify.error({title:\"失败\",message:t.data.errmsg})}))}))},handleDelete:function(e){var t=this;Object(o[\"b\"])(e).then((function(i){t.$notify.success({title:\"成功\",message:\"删除管理员成功\"});var a=t.list.indexOf(e);t.list.splice(a,1)})).catch((function(e){t.$notify.error({title:\"失败\",message:e.data.errmsg})}))},handlePermission:function(e){var t=this;this.permissionDialogFormVisible=!0,this.permissionForm.roleId=e.id,Object(o[\"c\"])({roleId:e.id}).then((function(e){t.systemPermissions=e.data.data.systemPermissions,t.assignedPermissions=e.data.data.assignedPermissions}))},updatePermission:function(){var e=this;this.permissionForm.permissions=this.$refs.tree.getCheckedKeys(!0),Object(o[\"f\"])(this.permissionForm).then((function(t){e.permissionDialogFormVisible=!1,e.$notify.success({title:\"成功\",message:\"授权成功\"})})).catch((function(t){e.$notify.error({title:\"失败\",message:t.data.errmsg})}))}}},c=l,d=i(\"2877\"),u=Object(d[\"a\"])(c,a,n,!1,null,null,null);t[\"default\"]=u.exports}}]);","extractedComments":[]}