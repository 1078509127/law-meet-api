{"remainingRequest":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\java\\dts-shop-api\\admin-ui\\src\\views\\promotion\\articleEdit.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\src\\views\\promotion\\articleEdit.vue","mtime":1720695645781},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\babel.config.js","mtime":1720695645901},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720774706922},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1720774708117},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720774706922},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1720774708700}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9Qcm9qZWN0cy9qYXZhL2R0cy1zaG9wLWFwaS9hZG1pbi11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiKTsKdmFyIF9hcnRpY2xlID0gcmVxdWlyZSgiQC9hcGkvYnVzaW5lc3MvYXJ0aWNsZSIpOwp2YXIgX3N0b3JhZ2UgPSByZXF1aXJlKCJAL2FwaS9idXNpbmVzcy9zdG9yYWdlIik7CnZhciBfdGlueW1jZVZ1ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQHRpbnltY2UvdGlueW1jZS12dWUiKSk7CnZhciBfZWxlbWVudFVpID0gcmVxdWlyZSgiZWxlbWVudC11aSIpOwp2YXIgX2F1dGggPSByZXF1aXJlKCJAL3V0aWxzL2F1dGgiKTsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIG5hbWU6ICdBcnRpY2xlRWRpdCcsCiAgY29tcG9uZW50czogewogICAgRWRpdG9yOiBfdGlueW1jZVZ1ZS5kZWZhdWx0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXBsb2FkUGF0aDogX3N0b3JhZ2UudXBsb2FkUGF0aCwKICAgICAgYXJ0aWNsZToge30sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdGl0bGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfmoIfpopjkuI3og73kuLrnqbonLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgY29udGVudDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+S/oeaBr+WGheWuueS4jeiDveS4uuepuicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBlZGl0b3JJbml0OiB7CiAgICAgICAgbGFuZ3VhZ2U6ICd6aF9DTicsCiAgICAgICAgY29udmVydF91cmxzOiBmYWxzZSwKICAgICAgICBwbHVnaW5zOiBbJ2Fkdmxpc3QgYW5jaG9yIGF1dG9saW5rIGF1dG9zYXZlIGNvZGUgY29kZXNhbXBsZSBjb2xvcnBpY2tlciBjb2xvcnBpY2tlciBjb250ZXh0bWVudSBkaXJlY3Rpb25hbGl0eSBlbW90aWNvbnMgZnVsbHNjcmVlbiBociBpbWFnZSBpbWFnZXRvb2xzIGltcG9ydGNzcyBpbnNlcnRkYXRldGltZSBsaW5rIGxpc3RzIG1lZGlhIG5vbmJyZWFraW5nIG5vbmVkaXRhYmxlIHBhZ2VicmVhayBwYXN0ZSBwcmV2aWV3IHByaW50IHNhdmUgc2VhcmNocmVwbGFjZSBzcGVsbGNoZWNrZXIgdGFiZm9jdXMgdGFibGUgdGVtcGxhdGUgdGV4dGNvbG9yIHRleHRwYXR0ZXJuIHZpc3VhbGJsb2NrcyB2aXN1YWxjaGFycyB3b3JkY291bnQnXSwKICAgICAgICB0b29sYmFyOiBbJ3NlYXJjaHJlcGxhY2UgYm9sZCBpdGFsaWMgdW5kZXJsaW5lIHN0cmlrZXRocm91Z2ggYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgb3V0ZGVudCBpbmRlbnQgIGJsb2NrcXVvdGUgdW5kbyByZWRvIHJlbW92ZWZvcm1hdCBzdWJzY3JpcHQgc3VwZXJzY3JpcHQgY29kZSBjb2Rlc2FtcGxlJywgJ2hyIGJ1bGxpc3QgbnVtbGlzdCBsaW5rIGltYWdlIGNoYXJtYXAgcHJldmlldyBhbmNob3IgcGFnZWJyZWFrIGluc2VydGRhdGV0aW1lIG1lZGlhIHRhYmxlIGVtb3RpY29ucyBmb3JlY29sb3IgYmFja2NvbG9yIGZ1bGxzY3JlZW4nXSwKICAgICAgICBpbWFnZXNfdXBsb2FkX2hhbmRsZXI6IGZ1bmN0aW9uIGltYWdlc191cGxvYWRfaGFuZGxlcihibG9iSW5mbywgc3VjY2VzcywgZmFpbHVyZSkgewogICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBibG9iSW5mby5ibG9iKCkpOwogICAgICAgICAgKDAsIF9zdG9yYWdlLmNyZWF0ZVN0b3JhZ2UpKGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgc3VjY2VzcyhyZXMuZGF0YS5kYXRhLnVybCk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZhaWx1cmUoJ+S4iuS8oOWksei0pe+8jOivt+mHjeaWsOS4iuS8oCcpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhlYWRlcnM6IGZ1bmN0aW9uIGhlYWRlcnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgJ1gtRHRzLUFkbWluLVRva2VuJzogKDAsIF9hdXRoLmdldFRva2VuKSgpCiAgICAgIH07CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuaWQgPT0gbnVsbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgYXJ0aWNsZUlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICAgICgwLCBfYXJ0aWNsZS5kZXRhaWxBcnRpY2xlKShhcnRpY2xlSWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuYXJ0aWNsZSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2FuY2VsOiBmdW5jdGlvbiBoYW5kbGVDYW5jZWwoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL3Byb21vdGlvbi9hcnRpY2xlTGlzdCcKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgICgwLCBfYXJ0aWNsZS5lZGl0QXJ0aWNsZSkodGhpcy5hcnRpY2xlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnycKICAgICAgICB9KTsKICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICcvcHJvbW90aW9uL2FydGljbGVMaXN0JwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfZWxlbWVudFVpLk1lc3NhZ2VCb3guYWxlcnQoJ+S4muWKoemUmeivr++8micgKyByZXNwb25zZS5kYXRhLmVycm1zZywgJ+itpuWRiicsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["_article","require","_storage","_tinymceVue","_interopRequireDefault","_elementUi","_auth","name","components","Editor","data","uploadPath","article","rules","title","required","message","trigger","content","editorInit","language","convert_urls","plugins","toolbar","images_upload_handler","blobInfo","success","failure","formData","FormData","append","blob","createStorage","then","res","url","catch","computed","headers","getToken","created","init","methods","_this","$route","query","id","articleId","detailArticle","response","handleCancel","$router","push","path","handleEdit","_this2","editArticle","$notify","MessageBox","alert","errmsg","confirmButtonText","type"],"sources":["src/views/promotion/articleEdit.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n\r\n    <el-card class=\"box-card\">\r\n      <h3>编辑信息公告</h3>\r\n      <el-form ref=\"article\" :rules=\"rules\" :model=\"article\" label-width=\"150px\">\r\n        <el-form-item label=\"类型\" prop=\"type\">\r\n          <el-radio-group v-model=\"article.type\">\r\n            <el-radio :label=\"'1'\">公告</el-radio>\r\n            <el-radio :label=\"'0'\">通知</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"标题\" prop=\"title\">\r\n          <el-input v-model=\"article.title\"/>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"内容\">\r\n          <editor :init=\"editorInit\" v-model=\"article.content\"/>\r\n        </el-form-item>\r\n\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <div class=\"op-container\">\r\n      <el-button @click=\"handleCancel\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"handleEdit\">更新</el-button>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.el-card {\r\n  margin-bottom: 10px;\r\n}\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n.input-new-keyword {\r\n  width: 90px;\r\n  margin-left: 10px;\r\n  vertical-align: bottom;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #20a0ff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 145px;\r\n  height: 145px;\r\n  display: block;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { detailArticle, editArticle } from '@/api/business/article'\r\nimport { createStorage, uploadPath } from '@/api/business/storage'\r\nimport Editor from '@tinymce/tinymce-vue'\r\nimport { MessageBox } from 'element-ui'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nexport default {\r\n  name: 'ArticleEdit',\r\n  components: { Editor },\r\n  data() {\r\n    return {\r\n      uploadPath,\r\n      article: {},\r\n      rules: {\r\n        title: [{ required: true, message: '标题不能为空', trigger: 'blur' }],\r\n        content: [{ required: true, message: '信息内容不能为空', trigger: 'blur' }]\r\n      },\r\n      editorInit: {\r\n        language: 'zh_CN',\r\n        convert_urls: false,\r\n        plugins: [\r\n          'advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount'\r\n        ],\r\n        toolbar: [\r\n          'searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample',\r\n          'hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen'\r\n        ],\r\n        images_upload_handler: function(blobInfo, success, failure) {\r\n          const formData = new FormData()\r\n          formData.append('file', blobInfo.blob())\r\n          createStorage(formData)\r\n            .then(res => {\r\n              success(res.data.data.url)\r\n            })\r\n            .catch(() => {\r\n              failure('上传失败，请重新上传')\r\n            })\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    headers() {\r\n      return {\r\n        'X-Dts-Admin-Token': getToken()\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init: function() {\r\n      if (this.$route.query.id == null) {\r\n        return\r\n      }\r\n      const articleId = this.$route.query.id\r\n      detailArticle(articleId).then(response => {\r\n        this.article = response.data.data\r\n      })\r\n    },\r\n    handleCancel: function() {\r\n      this.$router.push({ path: '/promotion/articleList' })\r\n    },\r\n    handleEdit: function() {\r\n      editArticle(this.article)\r\n        .then(response => {\r\n          this.$notify.success({\r\n            title: '成功',\r\n            message: '修改成功'\r\n          })\r\n          this.$router.push({ path: '/promotion/articleList' })\r\n        })\r\n        .catch(response => {\r\n          MessageBox.alert('业务错误：' + response.data.errmsg, '警告', {\r\n            confirmButtonText: '确定',\r\n            type: 'error'\r\n          })\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;;;;;;;AAqEA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,WAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,UAAA,GAAAJ,OAAA;AACA,IAAAK,KAAA,GAAAL,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iCAEA;EACAM,IAAA;EACAC,UAAA;IAAAC,MAAA,EAAAA;EAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA,EAAAA,mBAAA;MACAC,OAAA;MACAC,KAAA;QACAC,KAAA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAC,OAAA;UAAAH,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACAE,UAAA;QACAC,QAAA;QACAC,YAAA;QACAC,OAAA,GACA,gWACA;QACAC,OAAA,GACA,8KACA,qIACA;QACAC,qBAAA,WAAAA,sBAAAC,QAAA,EAAAC,OAAA,EAAAC,OAAA;UACA,IAAAC,QAAA,OAAAC,QAAA;UACAD,QAAA,CAAAE,MAAA,SAAAL,QAAA,CAAAM,IAAA;UACA,IAAAC,sBAAA,EAAAJ,QAAA,EACAK,IAAA,WAAAC,GAAA;YACAR,OAAA,CAAAQ,GAAA,CAAAxB,IAAA,CAAAA,IAAA,CAAAyB,GAAA;UACA,GACAC,KAAA;YACAT,OAAA;UACA;QACA;MACA;IACA;EACA;EACAU,QAAA;IACAC,OAAA,WAAAA,QAAA;MACA;QACA,yBAAAC,cAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,IAAA,WAAAA,KAAA;MAAA,IAAAE,KAAA;MACA,SAAAC,MAAA,CAAAC,KAAA,CAAAC,EAAA;QACA;MACA;MACA,IAAAC,SAAA,QAAAH,MAAA,CAAAC,KAAA,CAAAC,EAAA;MACA,IAAAE,sBAAA,EAAAD,SAAA,EAAAd,IAAA,WAAAgB,QAAA;QACAN,KAAA,CAAA/B,OAAA,GAAAqC,QAAA,CAAAvC,IAAA,CAAAA,IAAA;MACA;IACA;IACAwC,YAAA,WAAAA,aAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAAC,IAAA;MAAA;IACA;IACAC,UAAA,WAAAA,WAAA;MAAA,IAAAC,MAAA;MACA,IAAAC,oBAAA,OAAA5C,OAAA,EACAqB,IAAA,WAAAgB,QAAA;QACAM,MAAA,CAAAE,OAAA,CAAA/B,OAAA;UACAZ,KAAA;UACAE,OAAA;QACA;QACAuC,MAAA,CAAAJ,OAAA,CAAAC,IAAA;UAAAC,IAAA;QAAA;MACA,GACAjB,KAAA,WAAAa,QAAA;QACAS,qBAAA,CAAAC,KAAA,WAAAV,QAAA,CAAAvC,IAAA,CAAAkD,MAAA;UACAC,iBAAA;UACAC,IAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}