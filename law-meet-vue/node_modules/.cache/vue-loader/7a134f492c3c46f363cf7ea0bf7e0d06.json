{"remainingRequest":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\java\\dts-shop-api\\admin-ui\\src\\views\\promotion\\articleEdit.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\src\\views\\promotion\\articleEdit.vue","mtime":1720695645781},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720774706922},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1720774708117},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720774706922},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1720774708700}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkZXRhaWxBcnRpY2xlLCBlZGl0QXJ0aWNsZSB9IGZyb20gJ0AvYXBpL2J1c2luZXNzL2FydGljbGUnDQppbXBvcnQgeyBjcmVhdGVTdG9yYWdlLCB1cGxvYWRQYXRoIH0gZnJvbSAnQC9hcGkvYnVzaW5lc3Mvc3RvcmFnZScNCmltcG9ydCBFZGl0b3IgZnJvbSAnQHRpbnltY2UvdGlueW1jZS12dWUnDQppbXBvcnQgeyBNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC11aScNCmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdBcnRpY2xlRWRpdCcsDQogIGNvbXBvbmVudHM6IHsgRWRpdG9yIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVwbG9hZFBhdGgsDQogICAgICBhcnRpY2xlOiB7fSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHRpdGxlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+agh+mimOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9XSwNCiAgICAgICAgY29udGVudDogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfkv6Hmga/lhoXlrrnkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfV0NCiAgICAgIH0sDQogICAgICBlZGl0b3JJbml0OiB7DQogICAgICAgIGxhbmd1YWdlOiAnemhfQ04nLA0KICAgICAgICBjb252ZXJ0X3VybHM6IGZhbHNlLA0KICAgICAgICBwbHVnaW5zOiBbDQogICAgICAgICAgJ2Fkdmxpc3QgYW5jaG9yIGF1dG9saW5rIGF1dG9zYXZlIGNvZGUgY29kZXNhbXBsZSBjb2xvcnBpY2tlciBjb2xvcnBpY2tlciBjb250ZXh0bWVudSBkaXJlY3Rpb25hbGl0eSBlbW90aWNvbnMgZnVsbHNjcmVlbiBociBpbWFnZSBpbWFnZXRvb2xzIGltcG9ydGNzcyBpbnNlcnRkYXRldGltZSBsaW5rIGxpc3RzIG1lZGlhIG5vbmJyZWFraW5nIG5vbmVkaXRhYmxlIHBhZ2VicmVhayBwYXN0ZSBwcmV2aWV3IHByaW50IHNhdmUgc2VhcmNocmVwbGFjZSBzcGVsbGNoZWNrZXIgdGFiZm9jdXMgdGFibGUgdGVtcGxhdGUgdGV4dGNvbG9yIHRleHRwYXR0ZXJuIHZpc3VhbGJsb2NrcyB2aXN1YWxjaGFycyB3b3JkY291bnQnDQogICAgICAgIF0sDQogICAgICAgIHRvb2xiYXI6IFsNCiAgICAgICAgICAnc2VhcmNocmVwbGFjZSBib2xkIGl0YWxpYyB1bmRlcmxpbmUgc3RyaWtldGhyb3VnaCBhbGlnbmxlZnQgYWxpZ25jZW50ZXIgYWxpZ25yaWdodCBvdXRkZW50IGluZGVudCAgYmxvY2txdW90ZSB1bmRvIHJlZG8gcmVtb3ZlZm9ybWF0IHN1YnNjcmlwdCBzdXBlcnNjcmlwdCBjb2RlIGNvZGVzYW1wbGUnLA0KICAgICAgICAgICdociBidWxsaXN0IG51bWxpc3QgbGluayBpbWFnZSBjaGFybWFwIHByZXZpZXcgYW5jaG9yIHBhZ2VicmVhayBpbnNlcnRkYXRldGltZSBtZWRpYSB0YWJsZSBlbW90aWNvbnMgZm9yZWNvbG9yIGJhY2tjb2xvciBmdWxsc2NyZWVuJw0KICAgICAgICBdLA0KICAgICAgICBpbWFnZXNfdXBsb2FkX2hhbmRsZXI6IGZ1bmN0aW9uKGJsb2JJbmZvLCBzdWNjZXNzLCBmYWlsdXJlKSB7DQogICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQ0KICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGJsb2JJbmZvLmJsb2IoKSkNCiAgICAgICAgICBjcmVhdGVTdG9yYWdlKGZvcm1EYXRhKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgc3VjY2VzcyhyZXMuZGF0YS5kYXRhLnVybCkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgICAgICBmYWlsdXJlKCfkuIrkvKDlpLHotKXvvIzor7fph43mlrDkuIrkvKAnKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBoZWFkZXJzKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgJ1gtRHRzLUFkbWluLVRva2VuJzogZ2V0VG9rZW4oKQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmluaXQoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdDogZnVuY3Rpb24oKSB7DQogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuaWQgPT0gbnVsbCkgew0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGNvbnN0IGFydGljbGVJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkDQogICAgICBkZXRhaWxBcnRpY2xlKGFydGljbGVJZCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMuYXJ0aWNsZSA9IHJlc3BvbnNlLmRhdGEuZGF0YQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZUNhbmNlbDogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvcHJvbW90aW9uL2FydGljbGVMaXN0JyB9KQ0KICAgIH0sDQogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24oKSB7DQogICAgICBlZGl0QXJ0aWNsZSh0aGlzLmFydGljbGUpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7DQogICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJw0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL3Byb21vdGlvbi9hcnRpY2xlTGlzdCcgfSkNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICBNZXNzYWdlQm94LmFsZXJ0KCfkuJrliqHplJnor6/vvJonICsgcmVzcG9uc2UuZGF0YS5lcnJtc2csICforablkYonLCB7DQogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgICAgICB0eXBlOiAnZXJyb3InDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["articleEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"articleEdit.vue","sourceRoot":"src/views/promotion","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n\r\n    <el-card class=\"box-card\">\r\n      <h3>编辑信息公告</h3>\r\n      <el-form ref=\"article\" :rules=\"rules\" :model=\"article\" label-width=\"150px\">\r\n        <el-form-item label=\"类型\" prop=\"type\">\r\n          <el-radio-group v-model=\"article.type\">\r\n            <el-radio :label=\"'1'\">公告</el-radio>\r\n            <el-radio :label=\"'0'\">通知</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"标题\" prop=\"title\">\r\n          <el-input v-model=\"article.title\"/>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"内容\">\r\n          <editor :init=\"editorInit\" v-model=\"article.content\"/>\r\n        </el-form-item>\r\n\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <div class=\"op-container\">\r\n      <el-button @click=\"handleCancel\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"handleEdit\">更新</el-button>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.el-card {\r\n  margin-bottom: 10px;\r\n}\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n.input-new-keyword {\r\n  width: 90px;\r\n  margin-left: 10px;\r\n  vertical-align: bottom;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #20a0ff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 145px;\r\n  height: 145px;\r\n  display: block;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { detailArticle, editArticle } from '@/api/business/article'\r\nimport { createStorage, uploadPath } from '@/api/business/storage'\r\nimport Editor from '@tinymce/tinymce-vue'\r\nimport { MessageBox } from 'element-ui'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nexport default {\r\n  name: 'ArticleEdit',\r\n  components: { Editor },\r\n  data() {\r\n    return {\r\n      uploadPath,\r\n      article: {},\r\n      rules: {\r\n        title: [{ required: true, message: '标题不能为空', trigger: 'blur' }],\r\n        content: [{ required: true, message: '信息内容不能为空', trigger: 'blur' }]\r\n      },\r\n      editorInit: {\r\n        language: 'zh_CN',\r\n        convert_urls: false,\r\n        plugins: [\r\n          'advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount'\r\n        ],\r\n        toolbar: [\r\n          'searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample',\r\n          'hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen'\r\n        ],\r\n        images_upload_handler: function(blobInfo, success, failure) {\r\n          const formData = new FormData()\r\n          formData.append('file', blobInfo.blob())\r\n          createStorage(formData)\r\n            .then(res => {\r\n              success(res.data.data.url)\r\n            })\r\n            .catch(() => {\r\n              failure('上传失败，请重新上传')\r\n            })\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    headers() {\r\n      return {\r\n        'X-Dts-Admin-Token': getToken()\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init: function() {\r\n      if (this.$route.query.id == null) {\r\n        return\r\n      }\r\n      const articleId = this.$route.query.id\r\n      detailArticle(articleId).then(response => {\r\n        this.article = response.data.data\r\n      })\r\n    },\r\n    handleCancel: function() {\r\n      this.$router.push({ path: '/promotion/articleList' })\r\n    },\r\n    handleEdit: function() {\r\n      editArticle(this.article)\r\n        .then(response => {\r\n          this.$notify.success({\r\n            title: '成功',\r\n            message: '修改成功'\r\n          })\r\n          this.$router.push({ path: '/promotion/articleList' })\r\n        })\r\n        .catch(response => {\r\n          MessageBox.alert('业务错误：' + response.data.errmsg, '警告', {\r\n            confirmButtonText: '确定',\r\n            type: 'error'\r\n          })\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}