{"remainingRequest":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\java\\dts-shop-api\\admin-ui\\src\\views\\goods\\edit.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\src\\views\\goods\\edit.vue","mtime":1720695645771},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720774706922},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1720774708117},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720774706922},{"path":"D:\\Projects\\java\\dts-shop-api\\admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1720774708700}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkZXRhaWxHb29kcywgZWRpdEdvb2RzLCBsaXN0Q2F0QW5kQnJhbmQgfSBmcm9tICdAL2FwaS9idXNpbmVzcy9nb29kcycNCmltcG9ydCB7IGNyZWF0ZVN0b3JhZ2UsIHVwbG9hZFBhdGggfSBmcm9tICdAL2FwaS9idXNpbmVzcy9zdG9yYWdlJw0KaW1wb3J0IEVkaXRvciBmcm9tICdAdGlueW1jZS90aW55bWNlLXZ1ZScNCmltcG9ydCB7IE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXVpJw0KaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0dvb2RzRWRpdCcsDQogIGNvbXBvbmVudHM6IHsgRWRpdG9yIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVwbG9hZFBhdGgsDQogICAgICBuZXdLZXl3b3JkVmlzaWJsZTogZmFsc2UsDQogICAgICBuZXdLZXl3b3JkOiAnJywNCiAgICAgIGtleXdvcmRzOiBbXSwNCiAgICAgIGdhbGxlcnlGaWxlTGlzdDogW10sDQogICAgICBjYXRlZ29yeUxpc3Q6IFtdLA0KICAgICAgYnJhbmRMaXN0OiBbXSwNCiAgICAgIGNhdGVnb3J5SWRzOiBbXSwNCiAgICAgIGdvb2RzOiB7IGdhbGxlcnk6IFtdIH0sDQogICAgICBzcGVjVmlzaWFibGU6IGZhbHNlLA0KICAgICAgc3BlY0Zvcm06IHsgc3BlY2lmaWNhdGlvbjogJycsIHZhbHVlOiAnJywgcGljVXJsOiAnJyB9LA0KICAgICAgc3BlY2lmaWNhdGlvbnM6IFt7IHNwZWNpZmljYXRpb246ICfop4TmoLwnLCB2YWx1ZTogJ+agh+WHhicsIHBpY1VybDogJycgfV0sDQogICAgICBwcm9kdWN0VmlzaWFibGU6IGZhbHNlLA0KICAgICAgcHJvZHVjdEZvcm06IHsNCiAgICAgICAgaWQ6IDAsDQogICAgICAgIHNwZWNpZmljYXRpb25zOiBbXSwNCiAgICAgICAgcHJpY2U6IDAuMCwNCiAgICAgICAgbnVtYmVyOiAwLA0KICAgICAgICB1cmw6ICcnDQogICAgICB9LA0KICAgICAgcHJvZHVjdHM6IFsNCiAgICAgICAgeyBpZDogMCwgc3BlY2lmaWNhdGlvbnM6IFsn5qCH5YeGJ10sIHByaWNlOiAwLjAsIG51bWJlcjogMCwgdXJsOiAnJyB9DQogICAgICBdLA0KICAgICAgYXR0cmlidXRlVmlzaWFibGU6IGZhbHNlLA0KICAgICAgYXR0cmlidXRlRm9ybTogeyBhdHRyaWJ1dGU6ICcnLCB2YWx1ZTogJycgfSwNCiAgICAgIGF0dHJpYnV0ZXM6IFtdLA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgZ29vZHNTbjogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfllYblk4HnvJblj7fkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdLA0KICAgICAgICBuYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WVhuWTgeWQjeensOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9XQ0KICAgICAgfSwNCiAgICAgIGVkaXRvckluaXQ6IHsNCiAgICAgICAgbGFuZ3VhZ2U6ICd6aF9DTicsDQogICAgICAgIGNvbnZlcnRfdXJsczogZmFsc2UsDQogICAgICAgIHBsdWdpbnM6IFsNCiAgICAgICAgICAnYWR2bGlzdCBhbmNob3IgYXV0b2xpbmsgYXV0b3NhdmUgY29kZSBjb2Rlc2FtcGxlIGNvbG9ycGlja2VyIGNvbG9ycGlja2VyIGNvbnRleHRtZW51IGRpcmVjdGlvbmFsaXR5IGVtb3RpY29ucyBmdWxsc2NyZWVuIGhyIGltYWdlIGltYWdldG9vbHMgaW1wb3J0Y3NzIGluc2VydGRhdGV0aW1lIGxpbmsgbGlzdHMgbWVkaWEgbm9uYnJlYWtpbmcgbm9uZWRpdGFibGUgcGFnZWJyZWFrIHBhc3RlIHByZXZpZXcgcHJpbnQgc2F2ZSBzZWFyY2hyZXBsYWNlIHNwZWxsY2hlY2tlciB0YWJmb2N1cyB0YWJsZSB0ZW1wbGF0ZSB0ZXh0Y29sb3IgdGV4dHBhdHRlcm4gdmlzdWFsYmxvY2tzIHZpc3VhbGNoYXJzIHdvcmRjb3VudCcNCiAgICAgICAgXSwNCiAgICAgICAgdG9vbGJhcjogWw0KICAgICAgICAgICdzZWFyY2hyZXBsYWNlIGJvbGQgaXRhbGljIHVuZGVybGluZSBzdHJpa2V0aHJvdWdoIGFsaWdubGVmdCBhbGlnbmNlbnRlciBhbGlnbnJpZ2h0IG91dGRlbnQgaW5kZW50ICBibG9ja3F1b3RlIHVuZG8gcmVkbyByZW1vdmVmb3JtYXQgc3Vic2NyaXB0IHN1cGVyc2NyaXB0IGNvZGUgY29kZXNhbXBsZScsDQogICAgICAgICAgJ2hyIGJ1bGxpc3QgbnVtbGlzdCBsaW5rIGltYWdlIGNoYXJtYXAgcHJldmlldyBhbmNob3IgcGFnZWJyZWFrIGluc2VydGRhdGV0aW1lIG1lZGlhIHRhYmxlIGVtb3RpY29ucyBmb3JlY29sb3IgYmFja2NvbG9yIGZ1bGxzY3JlZW4nDQogICAgICAgIF0sDQogICAgICAgIGltYWdlc191cGxvYWRfaGFuZGxlcjogZnVuY3Rpb24oYmxvYkluZm8sIHN1Y2Nlc3MsIGZhaWx1cmUpIHsNCiAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpDQogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgYmxvYkluZm8uYmxvYigpKQ0KICAgICAgICAgIGNyZWF0ZVN0b3JhZ2UoZm9ybURhdGEpDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICBzdWNjZXNzKHJlcy5kYXRhLmRhdGEudXJsKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICAgIGZhaWx1cmUoJ+S4iuS8oOWksei0pe+8jOivt+mHjeaWsOS4iuS8oCcpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGhlYWRlcnMoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICAnWC1EdHMtQWRtaW4tVG9rZW4nOiBnZXRUb2tlbigpDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuaW5pdCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5pZCA9PSBudWxsKSB7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KDQogICAgICBjb25zdCBnb29kc0lkID0gdGhpcy4kcm91dGUucXVlcnkuaWQNCiAgICAgIGRldGFpbEdvb2RzKGdvb2RzSWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmdvb2RzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmdvb2RzDQogICAgICAgIHRoaXMuc3BlY2lmaWNhdGlvbnMgPSByZXNwb25zZS5kYXRhLmRhdGEuc3BlY2lmaWNhdGlvbnMNCiAgICAgICAgdGhpcy5wcm9kdWN0cyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5wcm9kdWN0cw0KICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSByZXNwb25zZS5kYXRhLmRhdGEuYXR0cmlidXRlcw0KICAgICAgICB0aGlzLmNhdGVnb3J5SWRzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmNhdGVnb3J5SWRzDQoNCiAgICAgICAgdGhpcy5nYWxsZXJ5RmlsZUxpc3QgPSBbXQ0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ29vZHMuZ2FsbGVyeS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHRoaXMuZ2FsbGVyeUZpbGVMaXN0LnB1c2goew0KICAgICAgICAgICAgdXJsOiB0aGlzLmdvb2RzLmdhbGxlcnlbaV0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIGNvbnN0IGtleXdvcmRzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmdvb2RzLmtleXdvcmRzDQogICAgICAgIGlmIChrZXl3b3JkcyAhPT0gbnVsbCkgew0KICAgICAgICAgIHRoaXMua2V5d29yZHMgPSBrZXl3b3Jkcy5zcGxpdCgnLCcpDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICAgIGxpc3RDYXRBbmRCcmFuZCgpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5jYXRlZ29yeUxpc3QNCiAgICAgICAgdGhpcy5icmFuZExpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEuYnJhbmRMaXN0DQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlQ2F0ZWdvcnlDaGFuZ2UodmFsdWUpIHsNCiAgICAgIHRoaXMuZ29vZHMuY2F0ZWdvcnlJZCA9IHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdDQogICAgfSwNCiAgICBoYW5kbGVDYW5jZWw6IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2dvb2RzL2xpc3QnIH0pDQogICAgfSwNCiAgICBoYW5kbGVFZGl0OiBmdW5jdGlvbigpIHsNCiAgICAgIGNvbnN0IGZpbmFsR29vZHMgPSB7DQogICAgICAgIGdvb2RzOiB0aGlzLmdvb2RzLA0KICAgICAgICBzcGVjaWZpY2F0aW9uczogdGhpcy5zcGVjaWZpY2F0aW9ucywNCiAgICAgICAgcHJvZHVjdHM6IHRoaXMucHJvZHVjdHMsDQogICAgICAgIGF0dHJpYnV0ZXM6IHRoaXMuYXR0cmlidXRlcw0KICAgICAgfQ0KICAgICAgZWRpdEdvb2RzKGZpbmFsR29vZHMpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7DQogICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5Yib5bu65oiQ5YqfJw0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2dvb2RzL2xpc3QnIH0pDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChyZXNwb25zZSA9PiB7DQogICAgICAgICAgTWVzc2FnZUJveC5hbGVydCgn5Lia5Yqh6ZSZ6K+v77yaJyArIHJlc3BvbnNlLmRhdGEuZXJybXNnLCAn6K2m5ZGKJywgew0KICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICAgICAgdHlwZTogJ2Vycm9yJw0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVDbG9zZSh0YWcpIHsNCiAgICAgIHRoaXMua2V5d29yZHMuc3BsaWNlKHRoaXMua2V5d29yZHMuaW5kZXhPZih0YWcpLCAxKQ0KICAgICAgdGhpcy5nb29kcy5rZXl3b3JkcyA9IHRoaXMua2V5d29yZHMudG9TdHJpbmcoKQ0KICAgIH0sDQogICAgc2hvd0lucHV0KCkgew0KICAgICAgdGhpcy5uZXdLZXl3b3JkVmlzaWJsZSA9IHRydWUNCiAgICAgIHRoaXMuJG5leHRUaWNrKF8gPT4gew0KICAgICAgICB0aGlzLiRyZWZzLm5ld0tleXdvcmRJbnB1dC4kcmVmcy5pbnB1dC5mb2N1cygpDQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlSW5wdXRDb25maXJtKCkgew0KICAgICAgY29uc3QgbmV3S2V5d29yZCA9IHRoaXMubmV3S2V5d29yZA0KICAgICAgaWYgKG5ld0tleXdvcmQpIHsNCiAgICAgICAgdGhpcy5rZXl3b3Jkcy5wdXNoKG5ld0tleXdvcmQpDQogICAgICAgIHRoaXMuZ29vZHMua2V5d29yZHMgPSB0aGlzLmtleXdvcmRzLnRvU3RyaW5nKCkNCiAgICAgIH0NCiAgICAgIHRoaXMubmV3S2V5d29yZFZpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy5uZXdLZXl3b3JkID0gJycNCiAgICB9LA0KICAgIHVwbG9hZFBpY1VybDogZnVuY3Rpb24ocmVzcG9uc2UpIHsNCiAgICAgIHRoaXMuZ29vZHMucGljVXJsID0gcmVzcG9uc2UuZGF0YS51cmwNCiAgICB9LA0KICAgIHVwbG9hZE92ZXJydW46IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgIHR5cGU6ICdlcnJvcicsDQogICAgICAgIG1lc3NhZ2U6ICfkuIrkvKDmlofku7bkuKrmlbDotoXlh7rpmZDliLYh5pyA5aSa5LiK5LygNeW8oOWbvueJhyEnDQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlR2FsbGVyeVVybChyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIGlmIChyZXNwb25zZS5lcnJubyA9PT0gMCkgew0KICAgICAgICB0aGlzLmdvb2RzLmdhbGxlcnkucHVzaChyZXNwb25zZS5kYXRhLnVybCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZVJlbW92ZTogZnVuY3Rpb24oZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nb29kcy5nYWxsZXJ5Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgIC8vIOi/memHjOWtmOWcqOS4pOenjeaDheWGtQ0KICAgICAgICAvLyAxLiDlpoLmnpzmiYDliKDpmaTlm77niYfmmK/liJrliJrkuIrkvKDnmoTlm77niYfvvIzpgqPkuYjlm77niYflnLDlnYDmmK9maWxlLnJlc3BvbnNlLmRhdGEudXJsDQogICAgICAgIC8vICAgIOatpOaXtueahGZpbGUudXJs6Jm954S25a2Y5Zyo77yM5L2G5piv5piv5pys5py65Zyw5Z2A77yM6ICM5LiN5piv6L+c56iL5Zyw5Z2A44CCDQogICAgICAgIC8vIDIuIOWmguaenOaJgOWIoOmZpOWbvueJh+aYr+WQjuWPsOi/lOWbnueahOW3suacieWbvueJh++8jOmCo+S5iOWbvueJh+WcsOWdgOaYr2ZpbGUudXJsDQogICAgICAgIHZhciB1cmwNCiAgICAgICAgaWYgKGZpbGUucmVzcG9uc2UgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgIHVybCA9IGZpbGUudXJsDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdXJsID0gZmlsZS5yZXNwb25zZS5kYXRhLnVybA0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHRoaXMuZ29vZHMuZ2FsbGVyeVtpXSA9PT0gdXJsKSB7DQogICAgICAgICAgdGhpcy5nb29kcy5nYWxsZXJ5LnNwbGljZShpLCAxKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBzcGVjQ2hhbmdlZDogZnVuY3Rpb24obGFiZWwpIHsNCiAgICAgIGlmIChsYWJlbCA9PT0gZmFsc2UpIHsNCiAgICAgICAgdGhpcy5zcGVjaWZpY2F0aW9ucyA9IFsNCiAgICAgICAgICB7IHNwZWNpZmljYXRpb246ICfop4TmoLwnLCB2YWx1ZTogJ+agh+WHhicsIHBpY1VybDogJycgfQ0KICAgICAgICBdDQogICAgICAgIHRoaXMucHJvZHVjdHMgPSBbDQogICAgICAgICAgeyBpZDogMCwgc3BlY2lmaWNhdGlvbnM6IFsn5qCH5YeGJ10sIHByaWNlOiAwLjAsIG51bWJlcjogMCwgdXJsOiAnJyB9DQogICAgICAgIF0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuc3BlY2lmaWNhdGlvbnMgPSBbXQ0KICAgICAgICB0aGlzLnByb2R1Y3RzID0gW10NCiAgICAgIH0NCiAgICB9LA0KICAgIHVwbG9hZFNwZWNQaWNVcmw6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7DQogICAgICB0aGlzLnNwZWNGb3JtLnBpY1VybCA9IHJlc3BvbnNlLmRhdGEudXJsDQogICAgfSwNCiAgICBoYW5kbGVTcGVjaWZpY2F0aW9uU2hvdygpIHsNCiAgICAgIHRoaXMuc3BlY0Zvcm0gPSB7IHNwZWNpZmljYXRpb246ICcnLCB2YWx1ZTogJycsIHBpY1VybDogJycgfQ0KICAgICAgdGhpcy5zcGVjVmlzaWFibGUgPSB0cnVlDQogICAgfSwNCiAgICBoYW5kbGVTcGVjaWZpY2F0aW9uQWRkKCkgew0KICAgICAgdmFyIGluZGV4ID0gdGhpcy5zcGVjaWZpY2F0aW9ucy5sZW5ndGggLSAxDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3BlY2lmaWNhdGlvbnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgY29uc3QgdiA9IHRoaXMuc3BlY2lmaWNhdGlvbnNbaV0NCiAgICAgICAgaWYgKHYuc3BlY2lmaWNhdGlvbiA9PT0gdGhpcy5zcGVjRm9ybS5zcGVjaWZpY2F0aW9uKSB7DQogICAgICAgICAgaW5kZXggPSBpDQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5zcGVjaWZpY2F0aW9ucy5zcGxpY2UoaW5kZXggKyAxLCAwLCB0aGlzLnNwZWNGb3JtKQ0KICAgICAgdGhpcy5zcGVjVmlzaWFibGUgPSBmYWxzZQ0KDQogICAgICB0aGlzLnNwZWNUb1Byb2R1Y3QoKQ0KICAgIH0sDQogICAgaGFuZGxlU3BlY2lmaWNhdGlvbkRlbGV0ZShyb3cpIHsNCiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zcGVjaWZpY2F0aW9ucy5pbmRleE9mKHJvdykNCiAgICAgIHRoaXMuc3BlY2lmaWNhdGlvbnMuc3BsaWNlKGluZGV4LCAxKQ0KICAgICAgdGhpcy5zcGVjVG9Qcm9kdWN0KCkNCiAgICB9LA0KICAgIHNwZWNUb1Byb2R1Y3QoKSB7DQogICAgICBpZiAodGhpcy5zcGVjaWZpY2F0aW9ucy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICAvLyDmoLnmja5zcGVjaWZpY2F0aW9uc+WIm+W7uuS4tOaXtuinhOagvOWIl+ihqA0KICAgICAgdmFyIHNwZWNWYWx1ZXMgPSBbXQ0KICAgICAgdmFyIHNwZWMgPSB0aGlzLnNwZWNpZmljYXRpb25zWzBdLnNwZWNpZmljYXRpb24NCiAgICAgIHZhciB2YWx1ZXMgPSBbXQ0KICAgICAgdmFsdWVzLnB1c2goMCkNCg0KICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLnNwZWNpZmljYXRpb25zLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGNvbnN0IGFzcGVjID0gdGhpcy5zcGVjaWZpY2F0aW9uc1tpXS5zcGVjaWZpY2F0aW9uDQoNCiAgICAgICAgaWYgKGFzcGVjID09PSBzcGVjKSB7DQogICAgICAgICAgdmFsdWVzLnB1c2goaSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBzcGVjVmFsdWVzLnB1c2godmFsdWVzKQ0KICAgICAgICAgIHNwZWMgPSBhc3BlYw0KICAgICAgICAgIHZhbHVlcyA9IFtdDQogICAgICAgICAgdmFsdWVzLnB1c2goaSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgc3BlY1ZhbHVlcy5wdXNoKHZhbHVlcykNCg0KICAgICAgLy8g5qC55o2u5Li05pe26KeE5qC85YiX6KGo55Sf5Lqn6LSn5ZOB6KeE5qC8DQogICAgICAvLyDnrpfms5Xln7rkuo4gaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R5aGpfc2YvYXJ0aWNsZS9kZXRhaWxzLzUzODkzMTI1DQogICAgICB2YXIgcHJvZHVjdHNJbmRleCA9IDANCiAgICAgIHZhciBwcm9kdWN0cyA9IFtdDQogICAgICB2YXIgY29tYmluYXRpb24gPSBbXQ0KICAgICAgdmFyIG4gPSBzcGVjVmFsdWVzLmxlbmd0aA0KICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBuOyBzKyspIHsNCiAgICAgICAgY29tYmluYXRpb25bc10gPSAwDQogICAgICB9DQogICAgICB2YXIgaW5kZXggPSAwDQogICAgICB2YXIgaXNDb250aW51ZSA9IGZhbHNlDQogICAgICBkbyB7DQogICAgICAgIHZhciBzcGVjaWZpY2F0aW9ucyA9IFtdDQogICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgbjsgeCsrKSB7DQogICAgICAgICAgdmFyIHogPSBzcGVjVmFsdWVzW3hdW2NvbWJpbmF0aW9uW3hdXQ0KICAgICAgICAgIHNwZWNpZmljYXRpb25zLnB1c2godGhpcy5zcGVjaWZpY2F0aW9uc1t6XS52YWx1ZSkNCiAgICAgICAgfQ0KICAgICAgICBwcm9kdWN0c1twcm9kdWN0c0luZGV4XSA9IHsNCiAgICAgICAgICBpZDogcHJvZHVjdHNJbmRleCwNCiAgICAgICAgICBzcGVjaWZpY2F0aW9uczogc3BlY2lmaWNhdGlvbnMsDQogICAgICAgICAgcHJpY2U6IDAuMCwNCiAgICAgICAgICBudW1iZXI6IDAsDQogICAgICAgICAgdXJsOiAnJw0KICAgICAgICB9DQogICAgICAgIHByb2R1Y3RzSW5kZXgrKw0KDQogICAgICAgIGluZGV4KysNCiAgICAgICAgY29tYmluYXRpb25bbiAtIDFdID0gaW5kZXgNCiAgICAgICAgZm9yICh2YXIgaiA9IG4gLSAxOyBqID49IDA7IGotLSkgew0KICAgICAgICAgIGlmIChjb21iaW5hdGlvbltqXSA+PSBzcGVjVmFsdWVzW2pdLmxlbmd0aCkgew0KICAgICAgICAgICAgY29tYmluYXRpb25bal0gPSAwDQogICAgICAgICAgICBpbmRleCA9IDANCiAgICAgICAgICAgIGlmIChqIC0gMSA+PSAwKSB7DQogICAgICAgICAgICAgIGNvbWJpbmF0aW9uW2ogLSAxXSA9IGNvbWJpbmF0aW9uW2ogLSAxXSArIDENCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaXNDb250aW51ZSA9IGZhbHNlDQogICAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgbjsgcCsrKSB7DQogICAgICAgICAgaWYgKGNvbWJpbmF0aW9uW3BdICE9PSAwKSB7DQogICAgICAgICAgICBpc0NvbnRpbnVlID0gdHJ1ZQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSB3aGlsZSAoaXNDb250aW51ZSkNCg0KICAgICAgdGhpcy5wcm9kdWN0cyA9IHByb2R1Y3RzDQogICAgfSwNCiAgICBoYW5kbGVQcm9kdWN0U2hvdyhyb3cpIHsNCiAgICAgIHRoaXMucHJvZHVjdEZvcm0gPSBPYmplY3QuYXNzaWduKHt9LCByb3cpDQogICAgICB0aGlzLnByb2R1Y3RWaXNpYWJsZSA9IHRydWUNCiAgICB9LA0KICAgIHVwbG9hZFByb2R1Y3RVcmw6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7DQogICAgICB0aGlzLnByb2R1Y3RGb3JtLnVybCA9IHJlc3BvbnNlLmRhdGEudXJsDQogICAgfSwNCiAgICBoYW5kbGVQcm9kdWN0RWRpdCgpIHsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0cy5sZW5ndGg7IGkrKykgew0KICAgICAgICBjb25zdCB2ID0gdGhpcy5wcm9kdWN0c1tpXQ0KICAgICAgICBpZiAodi5pZCA9PT0gdGhpcy5wcm9kdWN0Rm9ybS5pZCkgew0KICAgICAgICAgIHRoaXMucHJvZHVjdHMuc3BsaWNlKGksIDEsIHRoaXMucHJvZHVjdEZvcm0pDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdGhpcy5wcm9kdWN0VmlzaWFibGUgPSBmYWxzZQ0KICAgIH0sDQogICAgaGFuZGxlQXR0cmlidXRlU2hvdygpIHsNCiAgICAgIHRoaXMuYXR0cmlidXRlRm9ybSA9IHt9DQogICAgICB0aGlzLmF0dHJpYnV0ZVZpc2lhYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgaGFuZGxlQXR0cmlidXRlQWRkKCkgew0KICAgICAgdGhpcy5hdHRyaWJ1dGVzLnVuc2hpZnQodGhpcy5hdHRyaWJ1dGVGb3JtKQ0KICAgICAgdGhpcy5hdHRyaWJ1dGVWaXNpYWJsZSA9IGZhbHNlDQogICAgfSwNCiAgICBoYW5kbGVBdHRyaWJ1dGVEZWxldGUocm93KSB7DQogICAgICBjb25zdCBpbmRleCA9IHRoaXMuYXR0cmlidXRlcy5pbmRleE9mKHJvdykNCiAgICAgIHRoaXMuYXR0cmlidXRlcy5zcGxpY2UoaW5kZXgsIDEpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+RA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/goods","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n\r\n    <el-card class=\"box-card\">\r\n      <h3>商品介绍</h3>\r\n      <el-form ref=\"goods\" :rules=\"rules\" :model=\"goods\" label-width=\"150px\">\r\n        <el-form-item label=\"商品编号\" prop=\"goodsSn\">\r\n          <el-input v-model=\"goods.goodsSn\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"商品名称\" prop=\"name\">\r\n          <el-input v-model=\"goods.name\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"专柜价格\" prop=\"counterPrice\">\r\n          <el-input v-model=\"goods.counterPrice\" placeholder=\"0.00\">\r\n            <template slot=\"append\">元</template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"当前价格\" prop=\"retailPrice\">\r\n          <el-input v-model=\"goods.retailPrice\" placeholder=\"0.00\">\r\n            <template slot=\"append\">元</template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"是否新品\" prop=\"isNew\">\r\n          <el-radio-group v-model=\"goods.isNew\">\r\n            <el-radio :label=\"true\">新品</el-radio>\r\n            <el-radio :label=\"false\">非新品</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"是否热卖\" prop=\"isHot\">\r\n          <el-radio-group v-model=\"goods.isHot\">\r\n            <el-radio :label=\"false\">普通</el-radio>\r\n            <el-radio :label=\"true\">热卖</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"是否在售\" prop=\"isOnSale\">\r\n          <el-radio-group v-model=\"goods.isOnSale\">\r\n            <el-radio :label=\"true\">在售</el-radio>\r\n            <el-radio :label=\"false\">未售</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"商品图片\">\r\n          <el-upload\r\n            :headers=\"headers\"\r\n            :action=\"uploadPath\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"uploadPicUrl\"\r\n            class=\"avatar-uploader\"\r\n            accept=\".jpg,.jpeg,.png,.gif\">\r\n            <img v-if=\"goods.picUrl\" :src=\"goods.picUrl\" class=\"avatar\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"/>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"宣传画廊\">\r\n          <el-upload\r\n            :action=\"uploadPath\"\r\n            :headers=\"headers\"\r\n            :limit=\"5\"\r\n            :file-list=\"galleryFileList\"\r\n            :on-exceed=\"uploadOverrun\"\r\n            :on-success=\"handleGalleryUrl\"\r\n            :on-remove=\"handleRemove\"\r\n            multiple\r\n            accept=\".jpg,.jpeg,.png,.gif\"\r\n            list-type=\"picture-card\">\r\n            <i class=\"el-icon-plus\"/>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"商品单位\">\r\n          <el-input v-model=\"goods.unit\" placeholder=\"件 / 个 / 盒\"/>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"关键字\">\r\n          <el-tag v-for=\"tag in keywords\" :key=\"tag\" closable type=\"primary\" @close=\"handleClose(tag)\">\r\n            {{ tag }}\r\n          </el-tag>\r\n          <el-input v-if=\"newKeywordVisible\" ref=\"newKeywordInput\" v-model=\"newKeyword\" class=\"input-new-keyword\" size=\"small\" @keyup.enter.native=\"handleInputConfirm\" @blur=\"handleInputConfirm\"/>\r\n          <el-button v-else class=\"button-new-keyword\" size=\"small\" type=\"primary\" @click=\"showInput\">+ 增加</el-button>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"所属分类\">\r\n          <el-cascader :options=\"categoryList\" v-model=\"categoryIds\" expand-trigger=\"hover\" @change=\"handleCategoryChange\"/>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"所属品牌商\">\r\n          <el-select v-model=\"goods.brandId\">\r\n            <el-option v-for=\"item in brandList\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"/>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"商品简介\">\r\n          <el-input v-model=\"goods.brief\"/>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"商品详细介绍\">\r\n          <editor :init=\"editorInit\" v-model=\"goods.detail\"/>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <el-card class=\"box-card\">\r\n      <h3>商品规格</h3>\r\n      <el-button :plain=\"true\" type=\"primary\" @click=\"handleSpecificationShow\">添加</el-button>\r\n\r\n      <el-table :data=\"specifications\">\r\n        <el-table-column property=\"specification\" label=\"规格名\" />\r\n        <el-table-column property=\"value\" label=\"规格值\" >\r\n          <template slot-scope=\"scope\">\r\n            <el-tag type=\"primary\">\r\n              {{ scope.row.value }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column property=\"picUrl\" label=\"规格图片\">\r\n          <template slot-scope=\"scope\">\r\n            <img v-if=\"scope.row.picUrl\" :src=\"scope.row.picUrl\" width=\"40\">\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"操作\" width=\"250\" class-name=\"small-padding fixed-width\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"danger\" size=\"mini\" @click=\"handleSpecificationDelete(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <el-dialog :visible.sync=\"specVisiable\" title=\"设置规格\">\r\n        <el-form ref=\"specForm\" :rules=\"rules\" :model=\"specForm\" status-icon label-position=\"left\" label-width=\"100px\" style=\"width: 400px; margin-left:50px;\">\r\n          <el-form-item label=\"规格名\" prop=\"specification\">\r\n            <el-input v-model=\"specForm.specification\"/>\r\n          </el-form-item>\r\n          <el-form-item label=\"规格值\" prop=\"value\">\r\n            <el-input v-model=\"specForm.value\"/>\r\n          </el-form-item>\r\n          <el-form-item label=\"规格图片\" prop=\"picUrl\">\r\n            <el-upload\r\n              :headers=\"headers\"\r\n              :action=\"uploadPath\"\r\n              :show-file-list=\"false\"\r\n              :on-success=\"uploadSpecPicUrl\"\r\n              class=\"avatar-uploader\"\r\n              accept=\".jpg,.jpeg,.png,.gif\">\r\n              <img v-if=\"specForm.picUrl\" :src=\"specForm.picUrl\" class=\"avatar\">\r\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"/>\r\n            </el-upload>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"specVisiable = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSpecificationAdd\">确定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </el-card>\r\n\r\n    <el-card class=\"box-card\">\r\n      <h3>商品库存</h3>\r\n      <el-table :data=\"products\">\r\n        <el-table-column property=\"value\" label=\"货品规格\" >\r\n          <template slot-scope=\"scope\">\r\n            <el-tag v-for=\"tag in scope.row.specifications\" :key=\"tag\">\r\n              {{ tag }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column property=\"price\" width=\"100\" label=\"货品售价\"/>\r\n        <el-table-column property=\"number\" width=\"100\" label=\"货品数量\"/>\r\n        <el-table-column property=\"url\" width=\"100\" label=\"货品图片\">\r\n          <template slot-scope=\"scope\">\r\n            <img v-if=\"scope.row.url\" :src=\"scope.row.url\" width=\"40\">\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"操作\" width=\"100\" class-name=\"small-padding fixed-width\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleProductShow(scope.row)\">设置</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <el-dialog :visible.sync=\"productVisiable\" title=\"设置货品\">\r\n        <el-form ref=\"productForm\" :model=\"productForm\" status-icon label-position=\"left\" label-width=\"100px\" style=\"width: 400px; margin-left:50px;\">\r\n          <el-form-item label=\"货品规格列\" prop=\"specifications\">\r\n            <el-tag v-for=\"tag in productForm.specifications\" :key=\"tag\">\r\n              {{ tag }}\r\n            </el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"货品售价\" prop=\"price\">\r\n            <el-input v-model=\"productForm.price\"/>\r\n          </el-form-item>\r\n          <el-form-item label=\"货品数量\" prop=\"number\">\r\n            <el-input v-model=\"productForm.number\"/>\r\n          </el-form-item>\r\n          <el-form-item label=\"货品图片\" prop=\"url\">\r\n            <el-upload\r\n              :headers=\"headers\"\r\n              :action=\"uploadPath\"\r\n              :show-file-list=\"false\"\r\n              :on-success=\"uploadProductUrl\"\r\n              class=\"avatar-uploader\"\r\n              accept=\".jpg,.jpeg,.png,.gif\">\r\n              <img v-if=\"productForm.url\" :src=\"productForm.url\" class=\"avatar\">\r\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"/>\r\n            </el-upload>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"productVisiable = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleProductEdit\">确定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </el-card>\r\n\r\n    <el-card class=\"box-card\">\r\n      <h3>商品参数</h3>\r\n      <el-button :plain=\"true\" type=\"primary\" @click=\"handleAttributeShow\">添加</el-button>\r\n      <el-table :data=\"attributes\">\r\n        <el-table-column property=\"attribute\" label=\"商品参数名称\"/>\r\n        <el-table-column property=\"value\" label=\"商品参数值\"/>\r\n        <el-table-column align=\"center\" label=\"操作\" width=\"100\" class-name=\"small-padding fixed-width\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"danger\" size=\"mini\" @click=\"handleAttributeDelete(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <el-dialog :visible.sync=\"attributeVisiable\" title=\"设置商品参数\">\r\n        <el-form ref=\"attributeForm\" :model=\"attributeForm\" status-icon label-position=\"left\" label-width=\"100px\" style=\"width: 400px; margin-left:50px;\">\r\n          <el-form-item label=\"商品参数名称\" prop=\"attribute\">\r\n            <el-input v-model=\"attributeForm.attribute\"/>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品参数值\" prop=\"value\">\r\n            <el-input v-model=\"attributeForm.value\"/>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"attributeVisiable = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleAttributeAdd\">确定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </el-card>\r\n\r\n    <div class=\"op-container\">\r\n      <el-button @click=\"handleCancel\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"handleEdit\">更新商品</el-button>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.el-card {\r\n  margin-bottom: 10px;\r\n}\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n.input-new-keyword {\r\n  width: 90px;\r\n  margin-left: 10px;\r\n  vertical-align: bottom;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #20a0ff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 145px;\r\n  height: 145px;\r\n  display: block;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { detailGoods, editGoods, listCatAndBrand } from '@/api/business/goods'\r\nimport { createStorage, uploadPath } from '@/api/business/storage'\r\nimport Editor from '@tinymce/tinymce-vue'\r\nimport { MessageBox } from 'element-ui'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nexport default {\r\n  name: 'GoodsEdit',\r\n  components: { Editor },\r\n  data() {\r\n    return {\r\n      uploadPath,\r\n      newKeywordVisible: false,\r\n      newKeyword: '',\r\n      keywords: [],\r\n      galleryFileList: [],\r\n      categoryList: [],\r\n      brandList: [],\r\n      categoryIds: [],\r\n      goods: { gallery: [] },\r\n      specVisiable: false,\r\n      specForm: { specification: '', value: '', picUrl: '' },\r\n      specifications: [{ specification: '规格', value: '标准', picUrl: '' }],\r\n      productVisiable: false,\r\n      productForm: {\r\n        id: 0,\r\n        specifications: [],\r\n        price: 0.0,\r\n        number: 0,\r\n        url: ''\r\n      },\r\n      products: [\r\n        { id: 0, specifications: ['标准'], price: 0.0, number: 0, url: '' }\r\n      ],\r\n      attributeVisiable: false,\r\n      attributeForm: { attribute: '', value: '' },\r\n      attributes: [],\r\n      rules: {\r\n        goodsSn: [\r\n          { required: true, message: '商品编号不能为空', trigger: 'blur' }\r\n        ],\r\n        name: [{ required: true, message: '商品名称不能为空', trigger: 'blur' }]\r\n      },\r\n      editorInit: {\r\n        language: 'zh_CN',\r\n        convert_urls: false,\r\n        plugins: [\r\n          'advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount'\r\n        ],\r\n        toolbar: [\r\n          'searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample',\r\n          'hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen'\r\n        ],\r\n        images_upload_handler: function(blobInfo, success, failure) {\r\n          const formData = new FormData()\r\n          formData.append('file', blobInfo.blob())\r\n          createStorage(formData)\r\n            .then(res => {\r\n              success(res.data.data.url)\r\n            })\r\n            .catch(() => {\r\n              failure('上传失败，请重新上传')\r\n            })\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    headers() {\r\n      return {\r\n        'X-Dts-Admin-Token': getToken()\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init: function() {\r\n      if (this.$route.query.id == null) {\r\n        return\r\n      }\r\n\r\n      const goodsId = this.$route.query.id\r\n      detailGoods(goodsId).then(response => {\r\n        this.goods = response.data.data.goods\r\n        this.specifications = response.data.data.specifications\r\n        this.products = response.data.data.products\r\n        this.attributes = response.data.data.attributes\r\n        this.categoryIds = response.data.data.categoryIds\r\n\r\n        this.galleryFileList = []\r\n        for (var i = 0; i < this.goods.gallery.length; i++) {\r\n          this.galleryFileList.push({\r\n            url: this.goods.gallery[i]\r\n          })\r\n        }\r\n        const keywords = response.data.data.goods.keywords\r\n        if (keywords !== null) {\r\n          this.keywords = keywords.split(',')\r\n        }\r\n      })\r\n\r\n      listCatAndBrand().then(response => {\r\n        this.categoryList = response.data.data.categoryList\r\n        this.brandList = response.data.data.brandList\r\n      })\r\n    },\r\n    handleCategoryChange(value) {\r\n      this.goods.categoryId = value[value.length - 1]\r\n    },\r\n    handleCancel: function() {\r\n      this.$router.push({ path: '/goods/list' })\r\n    },\r\n    handleEdit: function() {\r\n      const finalGoods = {\r\n        goods: this.goods,\r\n        specifications: this.specifications,\r\n        products: this.products,\r\n        attributes: this.attributes\r\n      }\r\n      editGoods(finalGoods)\r\n        .then(response => {\r\n          this.$notify.success({\r\n            title: '成功',\r\n            message: '创建成功'\r\n          })\r\n          this.$router.push({ path: '/goods/list' })\r\n        })\r\n        .catch(response => {\r\n          MessageBox.alert('业务错误：' + response.data.errmsg, '警告', {\r\n            confirmButtonText: '确定',\r\n            type: 'error'\r\n          })\r\n        })\r\n    },\r\n    handleClose(tag) {\r\n      this.keywords.splice(this.keywords.indexOf(tag), 1)\r\n      this.goods.keywords = this.keywords.toString()\r\n    },\r\n    showInput() {\r\n      this.newKeywordVisible = true\r\n      this.$nextTick(_ => {\r\n        this.$refs.newKeywordInput.$refs.input.focus()\r\n      })\r\n    },\r\n    handleInputConfirm() {\r\n      const newKeyword = this.newKeyword\r\n      if (newKeyword) {\r\n        this.keywords.push(newKeyword)\r\n        this.goods.keywords = this.keywords.toString()\r\n      }\r\n      this.newKeywordVisible = false\r\n      this.newKeyword = ''\r\n    },\r\n    uploadPicUrl: function(response) {\r\n      this.goods.picUrl = response.data.url\r\n    },\r\n    uploadOverrun: function() {\r\n      this.$message({\r\n        type: 'error',\r\n        message: '上传文件个数超出限制!最多上传5张图片!'\r\n      })\r\n    },\r\n    handleGalleryUrl(response, file, fileList) {\r\n      if (response.errno === 0) {\r\n        this.goods.gallery.push(response.data.url)\r\n      }\r\n    },\r\n    handleRemove: function(file, fileList) {\r\n      for (var i = 0; i < this.goods.gallery.length; i++) {\r\n        // 这里存在两种情况\r\n        // 1. 如果所删除图片是刚刚上传的图片，那么图片地址是file.response.data.url\r\n        //    此时的file.url虽然存在，但是是本机地址，而不是远程地址。\r\n        // 2. 如果所删除图片是后台返回的已有图片，那么图片地址是file.url\r\n        var url\r\n        if (file.response === undefined) {\r\n          url = file.url\r\n        } else {\r\n          url = file.response.data.url\r\n        }\r\n\r\n        if (this.goods.gallery[i] === url) {\r\n          this.goods.gallery.splice(i, 1)\r\n        }\r\n      }\r\n    },\r\n    specChanged: function(label) {\r\n      if (label === false) {\r\n        this.specifications = [\r\n          { specification: '规格', value: '标准', picUrl: '' }\r\n        ]\r\n        this.products = [\r\n          { id: 0, specifications: ['标准'], price: 0.0, number: 0, url: '' }\r\n        ]\r\n      } else {\r\n        this.specifications = []\r\n        this.products = []\r\n      }\r\n    },\r\n    uploadSpecPicUrl: function(response) {\r\n      this.specForm.picUrl = response.data.url\r\n    },\r\n    handleSpecificationShow() {\r\n      this.specForm = { specification: '', value: '', picUrl: '' }\r\n      this.specVisiable = true\r\n    },\r\n    handleSpecificationAdd() {\r\n      var index = this.specifications.length - 1\r\n      for (var i = 0; i < this.specifications.length; i++) {\r\n        const v = this.specifications[i]\r\n        if (v.specification === this.specForm.specification) {\r\n          index = i\r\n        }\r\n      }\r\n\r\n      this.specifications.splice(index + 1, 0, this.specForm)\r\n      this.specVisiable = false\r\n\r\n      this.specToProduct()\r\n    },\r\n    handleSpecificationDelete(row) {\r\n      const index = this.specifications.indexOf(row)\r\n      this.specifications.splice(index, 1)\r\n      this.specToProduct()\r\n    },\r\n    specToProduct() {\r\n      if (this.specifications.length === 0) {\r\n        return\r\n      }\r\n      // 根据specifications创建临时规格列表\r\n      var specValues = []\r\n      var spec = this.specifications[0].specification\r\n      var values = []\r\n      values.push(0)\r\n\r\n      for (var i = 1; i < this.specifications.length; i++) {\r\n        const aspec = this.specifications[i].specification\r\n\r\n        if (aspec === spec) {\r\n          values.push(i)\r\n        } else {\r\n          specValues.push(values)\r\n          spec = aspec\r\n          values = []\r\n          values.push(i)\r\n        }\r\n      }\r\n      specValues.push(values)\r\n\r\n      // 根据临时规格列表生产货品规格\r\n      // 算法基于 https://blog.csdn.net/tyhj_sf/article/details/53893125\r\n      var productsIndex = 0\r\n      var products = []\r\n      var combination = []\r\n      var n = specValues.length\r\n      for (var s = 0; s < n; s++) {\r\n        combination[s] = 0\r\n      }\r\n      var index = 0\r\n      var isContinue = false\r\n      do {\r\n        var specifications = []\r\n        for (var x = 0; x < n; x++) {\r\n          var z = specValues[x][combination[x]]\r\n          specifications.push(this.specifications[z].value)\r\n        }\r\n        products[productsIndex] = {\r\n          id: productsIndex,\r\n          specifications: specifications,\r\n          price: 0.0,\r\n          number: 0,\r\n          url: ''\r\n        }\r\n        productsIndex++\r\n\r\n        index++\r\n        combination[n - 1] = index\r\n        for (var j = n - 1; j >= 0; j--) {\r\n          if (combination[j] >= specValues[j].length) {\r\n            combination[j] = 0\r\n            index = 0\r\n            if (j - 1 >= 0) {\r\n              combination[j - 1] = combination[j - 1] + 1\r\n            }\r\n          }\r\n        }\r\n        isContinue = false\r\n        for (var p = 0; p < n; p++) {\r\n          if (combination[p] !== 0) {\r\n            isContinue = true\r\n          }\r\n        }\r\n      } while (isContinue)\r\n\r\n      this.products = products\r\n    },\r\n    handleProductShow(row) {\r\n      this.productForm = Object.assign({}, row)\r\n      this.productVisiable = true\r\n    },\r\n    uploadProductUrl: function(response) {\r\n      this.productForm.url = response.data.url\r\n    },\r\n    handleProductEdit() {\r\n      for (var i = 0; i < this.products.length; i++) {\r\n        const v = this.products[i]\r\n        if (v.id === this.productForm.id) {\r\n          this.products.splice(i, 1, this.productForm)\r\n          break\r\n        }\r\n      }\r\n      this.productVisiable = false\r\n    },\r\n    handleAttributeShow() {\r\n      this.attributeForm = {}\r\n      this.attributeVisiable = true\r\n    },\r\n    handleAttributeAdd() {\r\n      this.attributes.unshift(this.attributeForm)\r\n      this.attributeVisiable = false\r\n    },\r\n    handleAttributeDelete(row) {\r\n      const index = this.attributes.indexOf(row)\r\n      this.attributes.splice(index, 1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}